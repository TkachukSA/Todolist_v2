(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{101:function(e,t,a){e.exports=a(130)},106:function(e,t,a){},107:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),i=a.n(r);a(106),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(107);var o,l,u,s=a(173),d=a(174),f=a(175),m=a(166),b=a(132),O=a(169),E=a(177),g=a(178),T=a(176),p=a(17),h=a(7),v=a(60),j=a(82),S=a.n(j).a.create(Object(h.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"7866738e-c5bf-440e-864d-4cc467150876"}})),k=function(e){return S.post("auth/login",e)},y=function(){return S.get("auth/me")},I=function(){return S.delete("auth/login")},C=function(){return S.get("todo-lists")},w=function(e){return S.post("todo-lists",{title:e})},A=function(e){return S.delete("todo-lists/".concat(e))},D=function(e,t){return S.put("todo-lists/".concat(e),{title:t})},L=function(e){return S.get("todo-lists/".concat(e,"/tasks"))},P=function(e,t){return S.delete("todo-lists/".concat(e,"/tasks/").concat(t))},N=function(e,t){return S.post("todo-lists/".concat(e,"/tasks"),{title:t})},R=function(e,t,a){return S.put("todo-lists/".concat(e,"/tasks/").concat(t),a)};!function(e){e[e.Succes=0]="Succes",e[e.Error=1]="Error",e[e.Captcha=10]="Captcha"}(o||(o={})),function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(l||(l={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(u||(u={}));var F=function(e,t){e.messages.length?t(z(e.messages[0])):t(z("Some error occurred")),t(H("failed"))},x=function(e,t){t(z(e.message)),t(H("failed"))},G={isLoggedIn:!1},K=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},M={status:"loading",error:null,initialized:!1},H=function(e){return{type:"APP/SET-STATUS",status:e}},U=function(e){return{type:"APP/SET-initialized",initialized:e}},z=function(e){return{type:"APP/SET-ERROR",error:e}},_=[],V=function(e,t){return{type:"CHANGR_TODOLIST_ENTITY_STATUS",entityStatus:t,id:e}},q=a(35),B={},Y=function(e,t,a){return function(n,c){n(H("loading"));var r=c().tasks[a].find((function(t){return t.id===e}));if(r){var i=Object(h.a)({deadline:r.deadline,description:r.description,priority:r.priority,startDate:r.startDate,title:r.title,status:r.status},t);R(a,e,i).then((function(c){if(c.data.resultCode===o.Succes){var r=function(e,t,a){return{type:"UPDATE-TASK",model:t,todolistId:a,taskId:e}}(e,t,a);n(r)}else F(c.data,n)})).catch((function(e){x(e,n)}))}else console.warn("task not found in the state")}},J=a(170),W=a(131),$=a(45),Q=a(179),X=a(167),Z=c.a.memo((function(e){console.log("AddItemForm called");var t=Object(n.useState)(""),a=Object($.a)(t,2),r=a[0],i=a[1],o=Object(n.useState)(null),l=Object($.a)(o,2),u=l[0],s=l[1],d=function(){""!==r.trim()?(e.addItem(r),i("")):s("Title is required")};return c.a.createElement("div",null,c.a.createElement(Q.a,{variant:"outlined",error:!!u,value:r,onChange:function(e){i(e.currentTarget.value)},onKeyPress:function(e){null!==u&&s(null),13===e.charCode&&d()},label:"Title",helperText:u,disabled:"loading"===e.entityStatus}),c.a.createElement(m.a,{color:"primary",onClick:d,disabled:"loading"===e.entityStatus},c.a.createElement(X.a,null)))})),ee=c.a.memo((function(e){console.log("EditableSpan called");var t=Object(n.useState)(!1),a=Object($.a)(t,2),r=a[0],i=a[1],o=Object(n.useState)(e.value),l=Object($.a)(o,2),u=l[0],s=l[1];e.entityStatus;return r?c.a.createElement(Q.a,{value:u,onChange:function(e){s(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.onChange(u)},disabled:"loading"===e.entityStatus}):c.a.createElement("span",{onDoubleClick:function(){i(!0),s(e.value)}},e.value)})),te=a(168),ae=a(181),ne=c.a.memo((function(e){var t=Object(n.useCallback)((function(){return e.removeTask(e.task.id,e.todolistId)}),[e.task.id,e.todolistId]),a=Object(n.useCallback)((function(t){var a=t.currentTarget.checked;e.changeTaskStatus(e.task.id,a?l.Completed:l.New,e.todolistId)}),[e.task.id,e.todolistId]),r=Object(n.useCallback)((function(t){e.changeTaskTitle(e.task.id,t,e.todolistId)}),[e.task.id,e.todolistId]);return c.a.createElement("div",{key:e.task.id,className:e.task.status===l.Completed?"is-done":""},c.a.createElement(ae.a,{checked:e.task.status===l.Completed,color:"primary",onChange:a}),c.a.createElement(ee,{value:e.task.title,onChange:r,entityStatus:e.entityStatus}),c.a.createElement(m.a,{onClick:t},c.a.createElement(te.a,null)))})),ce=c.a.memo((function(e){console.log("Todolist called");var t=Object(p.b)();Object(n.useEffect)((function(){var a,n=(a=e.id,function(e){e(H("loading")),L(a).then((function(t){var n=function(e,t){return{type:"SET-TASKS",tasks:e,todolistId:t}}(t.data.items,a);e(n),e(H("succeeded"))})).catch((function(t){x(t,e)}))});t(n)}),[]);var a=Object(n.useCallback)((function(t){e.addTask(t,e.id)}),[e.addTask,e.id]),r=Object(n.useCallback)((function(t){e.changeTodolistTitle(e.id,t)}),[e.id,e.changeTodolistTitle]),i=Object(n.useCallback)((function(){return e.changeFilter("all",e.id)}),[e.id,e.changeFilter]),o=Object(n.useCallback)((function(){return e.changeFilter("active",e.id)}),[e.id,e.changeFilter]),u=Object(n.useCallback)((function(){return e.changeFilter("completed",e.id)}),[e.id,e.changeFilter]),s=e.tasks;return"active"===e.filter&&(s=e.tasks.filter((function(e){return e.status===l.New}))),"completed"===e.filter&&(s=e.tasks.filter((function(e){return e.status===l.Completed}))),c.a.createElement("div",null,c.a.createElement("h3",null,c.a.createElement(ee,{value:e.title,onChange:r,entityStatus:e.entityStatus}),c.a.createElement(m.a,{onClick:function(){e.removeTodolist(e.id)},disabled:"loading"===e.entityStatus},c.a.createElement(te.a,null))),c.a.createElement(Z,{addItem:a,entityStatus:e.entityStatus}),c.a.createElement("div",null,s.map((function(t){return c.a.createElement(ne,{key:t.id,task:t,todolistId:e.id,entityStatus:e.entityStatus,removeTask:e.removeTask,changeTaskTitle:e.changeTaskTitle,changeTaskStatus:e.changeTaskStatus})}))),c.a.createElement("div",{style:{paddingTop:"10px"}},c.a.createElement(O.a,{variant:"all"===e.filter?"outlined":"text",onClick:i,color:"default"},"All"),c.a.createElement(O.a,{variant:"active"===e.filter?"outlined":"text",onClick:o,color:"primary"},"Active"),c.a.createElement(O.a,{variant:"completed"===e.filter?"outlined":"text",onClick:u,color:"secondary"},"Completed")))})),re=a(14),ie=function(){var e=Object(p.c)((function(e){return e.todolists})),t=Object(p.c)((function(e){return e.tasks})),a=Object(p.c)((function(e){return e.auth.isLoggedIn})),r=Object(p.b)();Object(n.useEffect)((function(){var e=function(e){e(H("loading")),C().then((function(t){e({type:"SET-TODOLISTS",todolists:t.data}),e(H("succeeded"))})).catch((function(t){x(t,e)}))};r(e)}),[]);var i=Object(n.useCallback)((function(e,t){var a=function(e,t){return function(a){a(H("loading")),P(t,e).then((function(n){var c=function(e,t){return{type:"REMOVE-TASK",taskId:e,todolistId:t}}(e,t);a(c),a(H("succeeded"))})).catch((function(e){x(e,a)}))}}(e,t);r(a)}),[]),l=Object(n.useCallback)((function(e,t){var a=function(e,t){return function(a){a(H("loading")),N(t,e).then((function(e){if(e.data.resultCode===o.Succes){var t=function(e){return{type:"ADD-TASK",task:e}}(e.data.data.item);a(t)}else F(e.data,a)})).catch((function(e){x(e.message,a)}))}}(e,t);r(a)}),[]),u=Object(n.useCallback)((function(e,t,a){var n=Y(e,{status:t},a);r(n)}),[]),s=Object(n.useCallback)((function(e,t,a){var n=Y(e,{title:t},a);r(n)}),[]),d=Object(n.useCallback)((function(e,t){var a={type:"CHANGE-TODOLIST-FILTER",id:t,filter:e};r(a)}),[]),f=Object(n.useCallback)((function(e){var t,a=(t=e,function(e){e(H("loading")),e(V(t,"loading")),A(t).then((function(a){a.data.resultCode===o.Succes?(e({type:"REMOVE-TODOLIST",id:t}),e(H("succeeded"))):(e(z(a.data.messages[0])),e(H("succeeded")))})).catch((function(t){x(t,e),console.log(t)}))});r(a)}),[]),m=Object(n.useCallback)((function(e,t){var a=function(e,t){return function(a){a(H("loading")),a(V(e,"loading")),D(e,t).then((function(n){a(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",id:e,title:t}}(e,t)),a(H("succeeded")),a(V(e,"succeeded"))})).catch((function(e){x(e,a),console.log(e)}))}}(e,t);r(a)}),[]),b=Object(n.useCallback)((function(e){var t=function(e){return function(t){t(H("loading")),w(e).then((function(e){e.data.resultCode===o.Succes?(t({type:"ADD-TODOLIST",todolist:e.data.data.item}),t(H("succeeded"))):F(e.data,t)})).catch((function(e){x(e,t)})).catch((function(e){x(e,t),console.log(e)}))}}(e);r(t)}),[r]);return a?c.a.createElement(c.a.Fragment,null,c.a.createElement(J.a,{container:!0,style:{padding:"20px"}},c.a.createElement(Z,{addItem:b})),c.a.createElement(J.a,{container:!0,spacing:3},e.map((function(e){var a=t[e.id];return c.a.createElement(J.a,{item:!0,key:e.id},c.a.createElement(W.a,{style:{padding:"10px"}},c.a.createElement(ce,{id:e.id,entityStatus:e.entityStatus,title:e.title,tasks:a,removeTask:i,changeFilter:d,addTask:l,changeTaskStatus:u,filter:e.filter,removeTodolist:f,changeTaskTitle:s,changeTodolistTitle:m})))})))):c.a.createElement(re.a,{to:"/login"})},oe=a(183),le=a(180);function ue(e){return c.a.createElement(le.a,Object.assign({elevation:6,variant:"filled"},e))}function se(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.app.error})),a=function(t,a){"clickaway"!==a&&e(z(null))};return c.a.createElement(oe.a,{open:null!==t,autoHideDuration:6e3,onClose:a},c.a.createElement(ue,{onClose:a,severity:"error"},t))}var de=a(184),fe=a(165),me=a(171),be=a(172),Oe=a(89),Ee=function(){var e=Object(p.c)((function(e){return e.auth.isLoggedIn})),t=Object(p.b)(),a=Object(Oe.a)({validate:function(e){return e.email?e.password?void 0:{password:"password is reqired"}:{email:"email is reqired"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){var a;t((a=e,function(e){e(H("loading")),k(a).then((function(t){0===t.data.resultCode?(e(K(!0)),e(H("succeeded"))):F(t.data,e)})).catch((function(t){x(t,e),console.log(t)}))}))}});return e?c.a.createElement(re.a,{to:"/"}):c.a.createElement(J.a,{container:!0,justify:"center"},c.a.createElement(J.a,{item:!0,xs:4},c.a.createElement("form",{onSubmit:a.handleSubmit},c.a.createElement(de.a,null,c.a.createElement(fe.a,null,c.a.createElement("p",null,"To log in get registered",c.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),c.a.createElement("p",null,"or use common test account credentials:"),c.a.createElement("p",null,"Email: free@samuraijs.com"),c.a.createElement("p",null,"Password: free")),c.a.createElement(me.a,null,c.a.createElement(Q.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?c.a.createElement("div",{style:{color:"red"}},a.errors.email):null,c.a.createElement(Q.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?c.a.createElement("div",{style:{color:"red"}},a.errors.password):null,c.a.createElement(be.a,{label:"Remember me",control:c.a.createElement(ae.a,Object.assign({checked:a.values.rememberMe},a.getFieldProps("rememberMe")))}),c.a.createElement(O.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))};var ge=function(){var e=Object(p.c)((function(e){return e.app.status})),t=Object(p.c)((function(e){return e.app.initialized})),a=Object(p.c)((function(e){return e.auth.isLoggedIn})),r=Object(p.b)();Object(n.useEffect)((function(){r((function(e){y().then((function(t){0===t.data.resultCode&&e(K(!0)),e(U(!0))}))}))}),[]);var i=Object(n.useCallback)((function(){r((function(e){e(H("loading")),I().then((function(t){0===t.data.resultCode?(e(K(!1)),e(H("succeeded"))):F(t.data,e)})).catch((function(t){x(t,e),console.log(t)}))}))}),[]);return t?c.a.createElement("div",{className:"App"},c.a.createElement(d.a,{position:"static"},c.a.createElement(f.a,null,c.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(T.a,null)),c.a.createElement(b.a,{variant:"h6"},"News"),a&&c.a.createElement(O.a,{color:"inherit",onClick:i},"Logout")),"loading"===e&&c.a.createElement(E.a,{color:"secondary"}),c.a.createElement(se,null)),c.a.createElement(g.a,{fixed:!0},c.a.createElement(re.d,null,c.a.createElement(re.b,{exact:!0,path:"/",render:function(){return c.a.createElement(ie,null)}}),c.a.createElement(re.b,{path:"/login",render:function(){return c.a.createElement(Ee,null)}}),c.a.createElement(re.b,{path:"/404",render:function(){return c.a.createElement("h1",null,"Page non found")}}),c.a.createElement(re.a,{from:"*",to:"/404"})))):c.a.createElement("div",{style:{position:"absolute",top:"30%",width:"100%",textAlign:"center"}},c.a.createElement(s.a,{color:"secondary"}))},Te=a(42),pe=a(88),he=Object(Te.c)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TASK":return Object(h.a)(Object(h.a)({},e),{},Object(q.a)({},t.todolistId,e[t.todolistId].filter((function(e){return e.id!=t.taskId}))));case"ADD-TASK":return Object(h.a)(Object(h.a)({},e),{},Object(q.a)({},t.task.todoListId,[t.task].concat(Object(v.a)(e[t.task.todoListId]))));case"UPDATE-TASK":return Object(h.a)(Object(h.a)({},e),{},Object(q.a)({},t.todolistId,e[t.todolistId].map((function(e){return e.id===t.taskId?Object(h.a)(Object(h.a)({},e),t.model):e}))));case"ADD-TODOLIST":return Object(h.a)(Object(h.a)({},e),{},Object(q.a)({},t.todolist.id,[]));case"REMOVE-TODOLIST":var a=Object(h.a)({},e);return delete a[t.id],a;case"SET-TODOLISTS":var n=Object(h.a)({},e);return t.todolists.forEach((function(e){n[e.id]=[]})),n;case"SET-TASKS":return Object(h.a)(Object(h.a)({},e),{},Object(q.a)({},t.todolistId,t.tasks));default:return e}},todolists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!=t.id}));case"ADD-TODOLIST":return[Object(h.a)(Object(h.a)({},t.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(v.a)(e));case"CHANGE-TODOLIST-TITLE":return e.map((function(e){return e.id===t.id?Object(h.a)(Object(h.a)({},e),{},{title:t.title}):e}));case"CHANGE-TODOLIST-FILTER":return e.map((function(e){return e.id===t.id?Object(h.a)(Object(h.a)({},e),{},{filter:t.filter}):e}));case"SET-TODOLISTS":return t.todolists.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{filter:"all",entityStatus:"idle"})}));case"CHANGR_TODOLIST_ENTITY_STATUS":return e.map((function(e){return e.id===t.id?Object(h.a)(Object(h.a)({},e),{},{entityStatus:t.entityStatus}):e}));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(h.a)(Object(h.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(h.a)(Object(h.a)({},e),{},{error:t.error});case"APP/SET-initialized":return Object(h.a)(Object(h.a)({},e),{},{initialized:t.initialized});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(h.a)(Object(h.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),ve=Object(Te.d)(he,Object(Te.a)(pe.a));window.store=ve;var je=a(47);i.a.render(c.a.createElement(p.a,{store:ve},c.a.createElement(je.a,null,c.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[101,1,2]]]);
//# sourceMappingURL=main.40ba3eec.chunk.js.map